<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="./WEB-INF/templates/plantillaPrincipal.xhtml"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">Asignar Administradores</ui:define>

	<ui:define name="contenido">
		<p:layout fullPage="true">

			<p:layoutUnit position="north" resizable="true"
				header="GUIA TELEFONICA - UNIVERSIDAD DE LAS FUERZAS ARMADAS - ESPE  ">
				<p:outputLabel>Administración de Administradores - Usuario Master: #{administradorBean.master}</p:outputLabel>

			</p:layoutUnit>

			<center>
				<p:layoutUnit position="center">

					<h:form id="panel1">

						<p:growl id="growl" life="2000" />
						<p:panel id="panelBusqueda1" header="Resultados de la Búsqueda">

							<p:panelGrid id="panelBusqueda" columns="3" layout="grid">


								<p:outputLabel for="valorBus" value="Ingrese el Apellido:" />
								<p:inputText id="valorBus"
									value="#{administradorBean.textoBusqueda}" required="true"
									style="width:100%;" maxlength="20" />


								<p:commandButton id="botonBusca" value="Buscar"
									update="vistaPresen,growl"
									actionListener="#{administradorBean.botonBuscar()}"
									process="@parent" icon="ui-icon-search"
									styleClass="ui-priority-primary" />



							</p:panelGrid>


							<p:dataTable id="vistaPresen" var="vis"
								value="#{administradorBean.personal}" selectionMode="single"
								selection="#{administradorBean.administrador}"
								rowKey="#{vis.idDocente}" paginator="true" rows="4"
								paginatorPosition="top"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								paginatorAlwaysVisible="true"
								emptyMessage="No se encontraron Datos">

								<p:ajax event="rowSelect"
									listener="#{administradorBean.onRowSelect2}" />

								<p:ajax event="rowUnselect"
									listener="#{administradorBean.onRowUnselect2}" />


								<p:column headerText="NOMBRES">
									<h:outputText value="#{vis.nombres}" />
								</p:column>

								<p:column headerText="CEDULA">
									<h:outputText value="#{vis.cedula}" />
								</p:column>

								<p:column headerText="ID BANNER">
									<h:outputText value="#{vis.idDocente}" />
								</p:column>

								<p:column headerText="SEDE">
									<h:outputText value="#{vis.sede}" />
								</p:column>

								<p:column headerText="UBICACION">
									<h:outputText value="#{vis.unidad}" />
								</p:column>

								<f:facet name="footer">
									<p:commandButton process="vistaPresen"
										update=":form5:modalGuardar,:form5:panelDetalle"
										icon="ui-icon-plusthick" value="Agregar" ajax="true"
										actionListener="#{administradorBean.botonAgregar()}"
										oncomplete="PF('dlg2').show()" />
								</f:facet>

							</p:dataTable>


						</p:panel>
					</h:form>

					<h:form id="panel2">
						<p:panel id="panelFiltro1" header="Administradores Actuales">


							<p:dataTable id="vistaAdmin2" var="vist" layout="grid"
								value="#{administradorBean.vistaAdmin}" selectionMode="single"
								rowKey="#{vist.id_persona}"
								selection="#{administradorBean.selectedPersona}"
								paginator="true" rows="4" paginatorPosition="top"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								paginatorAlwaysVisible="true"
								emptyMessage="No se encontraron Datos">


								<p:ajax event="rowSelect"
									listener="#{administradorBean.onRowSelect}" />

								<p:ajax event="rowUnselect"
									listener="#{administradorBean.onRowUnselect}" />



								<p:column headerText="ID BANNER">
									<h:outputText value="#{vist.id_persona}" />
								</p:column>


								<p:column headerText="NOMBRES">
									<h:outputText value="#{vist.nombre}" />
								</p:column>

								<f:facet name="footer">
									<p:commandButton process="vistaAdmin2"
										update=":form7:modalGuardar7,:form7:panelDetalle7"
										icon="ui-icon-pencil" value="Editar" ajax="true"
										actionListener="#{administradorBean.botonEditar()}"
										oncomplete="PF('dlg3').show()">
									</p:commandButton>



									<p:commandButton id="botonEliminar" value="Eliminar"
										update="vistaAdmin2,:panel1:growl"
										icon="ui-icon-close"
										actionListener="#{administradorBean.Eliminar()}"
										process="@this" styleClass="ui-priority-primary">
										<p:confirm message="¿Eliminar Registro?" icon="ui-icon-alert" />

									</p:commandButton>

									<p:confirmDialog global="true" showEffect="fade"
										hideEffect="fade">
										<p:commandButton value="Si" type="button"
											styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />

										<p:commandButton value="No" type="button"
											styleClass="ui-confirmdialog-no" icon="ui-icon-close" />

									</p:confirmDialog>

								</f:facet>

							</p:dataTable>

						</p:panel>
					</h:form>



				</p:layoutUnit>
			</center>

		</p:layout>

		<!-- 		MODAL PARA AGREGAR ADMINISTRADOR		-->


		<h:form id="form5">
			<p:dialog id="modalGuardar" header="Administrador" widgetVar="dlg2"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false"
				closable="false">


				<p:panel id="panelDetalle" style="text-align:center;">

					<p:panelGrid id="panelGuarda" columns="2"
						rendered="#{not empty administradorBean.administradorModal}"
						columnClasses="label,value" layout="grid">

						<h:outputText value="ID:" />
						<h:outputText id="id"
							value="#{administradorBean.administradorModal.idDocente}" />

						<h:outputText value="Nombre:" />
						<h:outputText id="nombre"
							value="#{administradorBean.administradorModal.nombres}" />


						<p:outputLabel for="menu" value="Sedes:" />
						<p:selectManyCheckbox id="menu" value="#{administradorBean.todas}"
							label="Lista de Sedes" filter="true" required="true" columns="1"
							layout="pageDirection">
							<f:selectItems value="#{administradorBean.listaSedes}" var="item"
								itemValue="#{item.valor}" itemLabel="#{item.descripcion}" />

						</p:selectManyCheckbox>

					</p:panelGrid>

					<p:spacer height="20px" />
					<p:commandButton id="botonGuardar" value="Guardar"
						update=":panel2:vistaAdmin2,:panel1:growl,panelDetalle"
						actionListener="#{administradorBean.botonAsignar()}"
						styleClass="ui-priority-primary"
						process="@this form5:panelDetalle">
						<p:confirm header="Confirmación" message="¿Guardar Registro?"
							icon="ui-icon-alert" />
					</p:commandButton>
					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
						<p:commandButton value="Si" type="button"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
						<p:commandButton value="No" type="button"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
					</p:confirmDialog>

					<p:commandButton id="botonCerrar" value="Cerrar"
						update="panelDetalle"
						actionListener="#{administradorBean.cerrar()}"
						styleClass="ui-priority-primary" process="@this"
						oncomplete="PF('dlg2').hide()">
						<p:resetInput target="panelDetalle" />
					</p:commandButton>

				</p:panel>
			</p:dialog>
		</h:form>

<!-- 		MODAL PARA MODIFICAR ADMINISTRADOR		-->


		<h:form id="form7">
			<p:dialog id="modalGuardar7" header="Administrador" widgetVar="dlg3"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false"
				closable="false">


				<p:panel id="panelDetalle7" style="text-align:center;">

					<p:panelGrid id="panelGuarda7" columns="2"
						rendered="#{not empty administradorBean.adminModal}"
						columnClasses="label,value" layout="grid">

						<h:outputText value="ID:" />
						<h:outputText id="id7"
							value="#{administradorBean.adminModal.id_persona}" />

						<h:outputText value="Nombre:" />
						<h:outputText id="nombre7"
							value="#{administradorBean.adminModal.nombre}" />


						<p:outputLabel for="menu7" value="Sedes:" />
						<p:selectManyCheckbox id="menu7" value="#{administradorBean.todas}"
							label="Lista de Sedes" filter="true" required="true" columns="1"
							layout="pageDirection">
							<f:selectItems value="#{administradorBean.listaSedes}" var="item"
								itemValue="#{item.valor}" itemLabel="#{item.descripcion}" />

						</p:selectManyCheckbox>

					</p:panelGrid>

					<p:spacer height="20px" />
					<p:commandButton id="botonGuardar7" value="Editar"
						update=":panel2:vistaAdmin2,:panel1:growl,panelDetalle7"
						actionListener="#{administradorBean.Modificar()}"
						styleClass="ui-priority-primary"
						process="@this form7:panelDetalle7">
						<p:confirm header="Confirmación" message="¿Editar Administrador?"
							icon="ui-icon-alert" />
					</p:commandButton>
					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
						<p:commandButton value="Si" type="button"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
						<p:commandButton value="No" type="button"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
					</p:confirmDialog>

					<p:commandButton id="botonCerrar7" value="Cerrar"
						update="panelDetalle7"
						actionListener="#{administradorBean.cerrar()}"
						styleClass="ui-priority-primary" process="@this"
						oncomplete="PF('dlg3').hide()">
						<p:resetInput target="panelDetalle7" />
					</p:commandButton>

				</p:panel>
			</p:dialog>
		</h:form>


	</ui:define>
</ui:composition>